<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css"
        integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">
</head>

<body>
    <div class="jumbotron bg-info">
        <h1>2021年全球晶圓代工市率</h1>
    </div>

    <div id="container">
    </div>

    <script>
        //=====建立物件=====
        let marketingSHare = {
            publish : "2021/12/31",
            version : "1.0",
            titles : ["排名", "公司", "國別", "市佔率%"],
            data : 
            [
                { Ranking: 1, Name: "台積電", Country: "台灣", Ratio: 53.1 },
                { Ranking: 2, Name: "三星電子", Country: "韓國", Ratio: 17.3 },
                { Ranking: 3, Name: "聯電", Country: "台灣", Ratio: 7.2 },
                { Ranking: 4, Name: "格羅方德", Country: "美國", Ratio: 6.1 },
                { Ranking: 5, Name: "中芯國際", Country: "中國", Ratio: 5.3 },
                { Ranking: 6, Name: "華虹半導體", Country: "中國", Ratio: 2.6 },
                { Ranking: 7, Name: "力積電", Country: "台灣", Ratio: 1.8 },
                { Ranking: 8, Name: "世界先進", Country: "台灣", Ratio: 1.4 },
                { Ranking: 9, Name: "高塔半導體", Country: "以色列", Ratio: 1.4 },
                { Ranking: 10, Name: "東部高科", Country: "南韓", Ratio: 1 }        
            ]
        };
        //=====宣告初始值=====
        let marketArray = [];
        let container;
        let table, thead, tbody;

        //=====function函式，一開網頁就執行=====
        window.onload =function(){
            container = document.getElementById('container'); //抓取Id(container)
            table = document.createElement('table');          //創建table標籤
            table.setAttribute("class", "table table-bordered"); //table標籤，增加class，設定框線
            thead = document.createElement('thead');  //創建thead標籤
            thead.setAttribute("class", "table-dark"); //thead標籤，增加class，設定黑底顏色
            tbody = document.createElement('tbody');  //創建tbody標籤
            

            CreateThead(marketingSHare.titles); //調用function函式，引數marketingSHare.titles，內容為「"排名", "公司", "國別", "市佔率%"」

            //把data的值(Ranking: 1, Name: "台積電"...等)，用迴圈依序放進marketArray
            marketingSHare.data.forEach(rankingArray=>{ 
                let values = Object.values(rankingArray);
                marketArray.push(values);
            });

            CreateTbody(marketArray);  //調用function，引數marketArray，內容為「 Ranking: 1, Name: "台積電"...等」
        }

        //=====function函式-title，參數是marketingSHare.titles("排名", "公司", "國別", "市佔率%")=====
        function CreateThead(title1){ 
            let theadTR = document.createElement("tr"); //創建tr標籤

            //用迴圈依序創建th標籤，並新增內容、插入為theadTR的節點
            title1.forEach(title2=>{    
                let th = document.createElement("th"); 
                th.innerText = title2;
                theadTR.append(th);
            });

            
            thead.append(theadTR); //theadTR，插入為thead標籤的節點
            table.append(thead);   //thead標籤，插入為table標籤的節點
            container.append(table); //table標籤，插入為container的節點
        }

        //=====function函式-data，參數是marketArray(Ranking: 1, Name: "台積電"...等)=====
        function CreateTbody(data1){ 
            data1.forEach(data2 => {         //用迴圈依序創建tr標籤
                let tr = document.createElement("tr");
                data2.forEach(data3 => {    //在tr中，用迴圈依序創建td標籤
                    let td = document.createElement("td");
                    td.innerText = data3;  //新增td內容
                    tr.append(td);         //td，插入為tr的節點
                });
                tbody.append(tr);          //tr，插入為tbody標籤的節點
            });
            table.append(tbody);          //tbody標籤，插入為table標籤的節點
        }
    </script>
    
</body>
</html>